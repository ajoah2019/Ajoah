webpackJsonp([1],{"0goD":function(t,e){},"8NtD":function(t,e){},FZai:function(t,e){},KXzH:function(t,e,s){t.exports=s.p+"static/img/toilet_low.cae8353.jpg"},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i=s("NYxO"),n=s("yviF");s("dih4"),s("881v");n.initializeApp({apiKey:"AIzaSyDD84-nLqygHpqVN7jlZOjgZ4one6TdyUc",authDomain:"ajoah-2121f.firebaseapp.com",databaseURL:"https://ajoah-2121f.firebaseio.com",projectId:"ajoah-2121f",storageBucket:"ajoah-2121f.appspot.com",messagingSenderId:"512593003059",appId:"1:512593003059:web:a253df39ea0bd93b585946"});var o=n.firestore(),r=s("kxiW"),l=s.n(r),c={name:"Navbar",data:function(){return{user:null,toilet_nav_reserves:[],toilet_nickname:""}},created:function(){var t=this;l.a.auth().onAuthStateChanged(function(e){if(e){t.user=e;e=l.a.auth().currentUser;var s=l.a.auth().currentUser.phoneNumber;console.log("phoneNumber = "+s),o.collection("users").doc(s).get().then(function(e){e.exists?(t.toilet_nickname=e.data().nickname,console.log("toilet_nickname = "+t.toilet_nickname)):alert("회원가입이 되어 있지 않습니다.")})}else t.user=null})},mounted:function(){},methods:{showReserve:function(){var t=this;this.toilet_nav_reserves.splice(0),o.collection("reservation").get().then(function(e){e.forEach(function(e){var s=e.data();t.toilet_nav_reserves.push(s)})})},SetPassword:function(){this.$router.push({path:"/setPassword"}),window.location.reload()},logout:function(){var t=this;l.a.auth().signOut().then(function(){t.$router.push({name:"Login"})})},showAbout:function(){this.about_view=!0},closeAbout:function(){this.about_view=!1},goMain:function(){this.$router.push({path:"/index"}),window.location.reload()},refresh:function(){window.location.reload()}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"navbar-fixed"},[s("nav",{staticClass:"nav-wrapper indigo"},[s("div",{staticClass:"container"},[s("a",{staticClass:"brand-logo",attrs:{href:"#"},on:{click:function(e){return t.goMain()}}},[t._v("AJOAH~!")]),t._v(" "),t._m(0),t._v(" "),s("ul",{staticClass:"right hide-on-med-and-down"},[t.user?t._e():s("li",[s("router-link",{attrs:{to:{name:"Signup"}}},[t._v("회원가입")])],1),t._v(" "),t.user?t._e():s("li",[s("router-link",{attrs:{to:{name:"Login"}}},[t._v("로그인")])],1),t._v(" "),t.user?s("li",[s("a",{on:{click:t.SetPassword}},[t._v(t._s(this.toilet_nickname))])]):t._e(),t._v(" "),t.user?s("li",[s("a",{on:{click:t.logout}},[t._v("로그아웃")])]):t._e(),t._v(" "),t._m(1)])])])]),t._v(" "),s("ul",{staticClass:"sidenav",attrs:{id:"mobile-links"}},[t.user?t._e():s("li",{staticClass:"sidenav-close",on:{click:function(e){return t.closeAbout()}}},[s("router-link",{attrs:{to:{name:"Signup"}}},[t._v("회원가입")])],1),t._v(" "),t.user?t._e():s("li",{staticClass:"sidenav-close",on:{click:function(e){return t.closeAbout()}}},[s("router-link",{attrs:{to:{name:"Login"}}},[t._v("로그인")])],1),t._v(" "),t.user?s("li",{staticClass:"sidenav-close"},[s("a",{on:{click:t.SetPassword}},[t._v(t._s(this.toilet_nickname))])]):t._e(),t._v(" "),t.user?s("li",{staticClass:"sidenav-close"},[s("a",{on:{click:t.logout}},[t._v("로그아웃")])]):t._e(),t._v(" "),t._m(2)]),t._v(" "),t._m(3)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"sidenav-trigger",attrs:{href:"#","data-target":"mobile-links"}},[e("i",{staticClass:"material-icons"},[this._v("menu")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"sidenav-close modal-trigger",attrs:{href:"#about"}},[this._v("About")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{staticClass:"sidenav-close modal-trigger",attrs:{href:"#about"}},[this._v("About")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal ",attrs:{id:"about"}},[s("div",{staticClass:"modal-content "},[s("footer",{staticClass:"page-footer"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col l6 s12"},[s("h5",{staticClass:"white-text"},[t._v("Ajoah는 여러분의 쾌적한 화장실 이용을 응원합니다!")]),t._v(" "),s("p",{staticClass:"grey-text text-lighten-4"})]),t._v(" "),s("div",{staticClass:"col l4 offset-l2 s12"},[s("h5",{staticClass:"white-text"}),t._v(" "),s("h5",{staticClass:"white-text"}),t._v(" "),s("ul",[s("li",[s("a",{staticClass:"grey-text text-lighten-3"},[t._v("* 만든이: 송준수, 윤경민, 정종현")])]),t._v(" "),s("li",[s("a",{staticClass:"grey-text text-lighten-3"},[t._v("* 만든날짜: 2019년 10월")])])])])])]),t._v(" "),s("div",{staticClass:"footer-copyright"},[s("div",{staticClass:"container"},[t._v("\r\n                Copyright 2019. 송-윤-정."),s("br"),t._v("All Right Reserved.\r\n                ")])])])]),t._v(" "),s("div",{staticClass:"modal-footer "},[s("a",{staticClass:"modal-close waves-effect waves-green btn-flat ",attrs:{href:"#"}},[t._v("확인")])])])}]};var d=s("VU/8")(c,u,!1,function(t){s("FZai")},null,null).exports;a.a.use(i.a);var v={store:new i.a.Store({state:{select_view:!1},mutations:{select_view_true:function(t){t.select_view=!0},select_view_false:function(t){t.select_view=!1}}}),name:"App",data:function(){return{select_view:!1}},props:["user"],components:{Navbar:d}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Navbar",{attrs:{select_view:this.select_view}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var _=s("VU/8")(v,h,!1,function(t){s("8NtD")},null,null).exports,p=s("/ocq"),m=s("PJh5"),f=s.n(m),g={},w={},C={name:"Index",data:function(){return{toilet_currents_state:[],toilet_reserves:[],toilet_noties:[],toilet_noties_cnt:0,toilet_selected_nm:"",toilet_selected_val:"",nickname:null,phone_num:null,feedback:null,showPreloader:!1,toilet_reserve_nickname:"",toilet_reserve_phone_no:"",toilet_reserve_seq:0,toilet_reserves_cnt:0,toilet_current_using_state:0,publicPath:Object({NODE_ENV:"production"}).BASE_URL,toilet_ing:Object({NODE_ENV:"production"}).BASE_URL+"static/img/toilet_ing_6_low.jpg",toilet_empty:Object({NODE_ENV:"production"}).BASE_URL+"static/img/toilet_low.jpg"}},created:function(){var t=this;this.$store.commit("select_view_true");this.toilet_ing=Object({NODE_ENV:"production"}).BASE_URL+"static/img/toilet_ing_6_low.jpg",this.toilet_empty=Object({NODE_ENV:"production"}).BASE_URL+"static/img/toilet_low.jpg";n.auth().currentUser;n.auth().onAuthStateChanged(function(e){e?t.user=e:(t.user=null,t.$router.push({path:"/login"}),window.location.reload())})},mounted:function(){var t=this,e=document.getElementById("toilet_select"),s=e.options[e.selectedIndex].value,a=e.options[e.selectedIndex].text;this.toilet_selected_val=s,this.toilet_selected_nm=a;var i=o.collection("current");console.log("mounted"),i.onSnapshot(function(e){e.docChanges().forEach(function(e){if("added"===e.type){var s=e.doc.data();g[s.id]=s,t.toilet_currents_state.push(s),null==w[s.group]&&(w[s.group]=[]),w[s.group]=s}"modified"===e.type&&(console.log("modified : ",e.doc.data()),g[e.doc.data().id]=e.doc.data())})}),this.select_view=!0,console.log("this.select_view"+this.select_view),this.showReserve(),this.showNoties()},methods:{onChange:function(t){this.showPreloader=!0;var e=document.getElementById("toilet_select"),s=e.options[e.selectedIndex].value,a=e.options[e.selectedIndex].text;this.toilet_selected_val=s,this.toilet_selected_nm=a,this.doJohoi()},doJohoi:function(){var t=this,e=document.getElementById("toilet_select"),s=e.options[e.selectedIndex].value,a=e.options[e.selectedIndex].text;this.toilet_selected_val=s,this.toilet_selected_nm=a,o.collection("current").where("group","==",s).get().then(function(e){g={},e.forEach(function(e){var s=e.data();t.toilet_currents_state.push(s),console.log("---"),console.log(t.toilet_currents),g[e.data().id]=e.data()})}),this.toilet_currents=w[this.toilet_selected_val],this.showPreloader=!1,this.show=!0},showReserve:function(){var t=this;this.toilet_reserves.splice(0);var e=document.getElementById("toilet_select"),s=e.options[e.selectedIndex].value,a=e.options[e.selectedIndex].text;this.toilet_selected_val=s,this.toilet_selected_nm=a,o.collection("reservation").where("location","==",this.toilet_selected_val).get().then(function(e){t.toilet_reserves_cnt=e.size,e.forEach(function(e){var s=e.data();console.log("toilet_reserve = "+e.data()),t.toilet_reserves.push({location:s.location,nickname:s.nickname,phone_num:s.phone_num,resv_channel:s.resv_channel,resv_dttm:f()(s.resv_dttm).format("lll"),seq:s.seq})})})},showNoties:function(){var t=this;this.toilet_noties.splice(0);var e=document.getElementById("toilet_select"),s=e.options[e.selectedIndex].value,a=e.options[e.selectedIndex].text;this.toilet_selected_val=s,this.toilet_selected_nm=a;var i=0;o.collection("noties").orderBy("send_datetime","desc").get().then(function(e){t.toilet_noties_cnt=e.size,console.log("this.toilet_noties_cnt = "+t.toilet_noties_cnt),e.forEach(function(e){var s=e.data();i<5&&(t.toilet_noties.push({channel:s.channel,nickname:s.nickname,send_datetime:s.send_datetime,send_message:s.send_message,send_type:s.send_type,sms_phone_number:s.sms_phone_number,users_fid:s.users_fid,id:e.id}),i+=1,console.log("this.cnt = "+i))})})},ChkTest:function(){console.log("------------"),console.log(g),g["Y7.M.01"].using?g["Y7.M.01"].using=!1:g["Y7.M.01"].using=!0},DoReserve:function(){var t=this;o.collection("current").where("group","==",this.toilet_selected_val).where("using","==",!1).get().then(function(e){t.toilet_current_using_state=e.size,t.toilet_current_using_state>0&&M.toast({html:"지금 화장실이 비어있어요. 바로 달려가세요~",classes:"rounded"})})}}};document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(".fixed-action-btn");M.FloatingActionButton.init(t,{direction:"top"})});var j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("select",{attrs:{id:"toilet_select"},on:{change:function(e){return t.onChange(e)}}},[t._m(0),t._v(" "),t._m(1)])])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{border:"1px solid",margin:"1px 1px"}},[a("div",{staticClass:"col s12"},[a("div",{staticClass:"row",staticStyle:{border:"1px solid"}},[a("div",{staticClass:"col s12"},[a("div",{staticClass:"card"},[t._m(2),t._v(" "),a("div",{staticClass:"card-content"},[a("span",{staticClass:"card-title"},[t._v(t._s(t.toilet_selected_nm)+" "),a("a",{staticClass:"sidenav-close modal-trigger",attrs:{href:"#view_reservation"}},[t._v("예약자 : "+t._s(this.toilet_reserves_cnt)+" 명")])]),t._v(" "),a("span",{staticClass:"badge white-text yellow pulse left"},[t._v("예약중")])])])])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{border:"1px solid"}},t._l(t.toilet_currents_state,function(e){return a("div",{key:e.id,staticClass:"col s12 m6 l6"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-image"},[e.using?a("img",{attrs:{src:s("nDk+"),alt:""}}):a("img",{attrs:{src:s("KXzH"),alt:""}}),t._v(" "),e.using?a("a",{staticClass:"halfway-fab btn-floating red pulse",attrs:{href:""}},[a("i",{staticClass:"material-icons"},[t._v("clear")])]):a("a",{staticClass:"halfway-fab btn-floating green pulse",attrs:{href:""}},[a("i",{staticClass:"material-icons"},[t._v("sentiment_satisfied_alt")])])]),t._v(" "),a("div",{staticClass:"card-content"},[a("span",{staticClass:"card-title"},[t._v(t._s(e.name))]),t._v(" "),e.using?a("span",{staticClass:"badge white-text pink"},[t._v("사용중")]):a("span",{staticClass:"badge black-text green pulse"},[t._v("비었음")])]),t._v(" "),t._m(3,!0)])])}),0)])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col s12 m6"},[a("div",{staticClass:"card red lighten-5"},[a("div",{staticClass:"card-content  brown-text darken-1"},[a("span",{staticClass:"card-title brown-text darken-4"},[t._v("공개 메시지")]),t._v(" "),a("ul",{staticClass:"collapsible"},t._l(t.toilet_noties,function(e){return a("li",{key:e.id},[a("div",{staticClass:"collapsible-header"},[a("i",{staticClass:"material-icons"},[t._v("filter_drama")]),t._v(t._s(e.nickname))]),t._v(" "),a("div",{staticClass:"collapsible-body "},[a("span",[t._v(t._s(e.send_message))])])])}),0)])])])]),t._v(" "),t._m(4),t._v(" "),a("div",{staticClass:"modal",attrs:{id:"reserveconfirm"}},[t._m(5),t._v(" "),a("div",{staticClass:"modal-footer"},[a("a",{staticClass:"modal-close btn orange",attrs:{href:"#!"}},[t._v("취소")]),t._v(" "),a("a",{staticClass:"modal-close btn orange",on:{click:function(e){return t.DoReserve()}}},[t._v("확인")]),t._v(" "),a("a",{staticClass:"modal-close btn orange",on:{click:function(e){return t.ChkTest()}}},[t._v("확인2")])])]),t._v(" "),a("div",{staticClass:"modal bottom-sheet",attrs:{id:"view_reservation"}},[a("ul",{staticClass:"collection with-header"},[a("li",{staticClass:"collection-header"},[a("h4",[t._v(t._s(t.toilet_selected_nm)+" 예약자")])]),t._v(" "),t._l(t.toilet_reserves,function(e){return a("li",{key:e.id,staticClass:"collection-item avatar"},[a("i",{staticClass:"material-icons circle blue"},[t._v("person")]),t._v(" "),a("span",{staticClass:"title"},[t._v(t._s(e.nickname))]),t._v(" "),a("p",{staticClass:"grey-text"},[t._v(t._s(e.resv_channel))]),t._v(" "),a("p",{staticClass:"grey-text"},[t._v(t._s(e.resv_dttm))])])})],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("optgroup",{attrs:{label:"연호빌딩 8층"}},[e("option",{attrs:{value:"Y8.M",selected:""}},[this._v("연호8층 남자")]),this._v(" "),e("option",{attrs:{value:"Y8.F"}},[this._v("연호8층 여자")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("optgroup",{attrs:{label:"연호빌딩 7층"}},[e("option",{attrs:{value:"Y7.M"}},[this._v("연호7층 남자")]),this._v(" "),e("option",{attrs:{value:"Y7.F"}},[this._v("연호7층 여자")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-card-image"},[e("a",{staticClass:"btn-floating halfway-fab waves-effect waves-light teal modal-trigger",attrs:{href:"#reserveconfirm"}},[e("i",{staticClass:"material-icons"},[this._v("add")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-action"},[e("a",{attrs:{href:"#"}},[this._v("지속시간 : 3분")]),this._v(" "),e("a",{attrs:{href:"#"}},[this._v("금일 3명 이용")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"page-footer"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col l6 s12"},[e("h5",{staticClass:"white-text"},[this._v("Ajoah는 여러분의 쾌적한 화장실 이용을 응원합니다!")])]),this._v(" "),e("div",{staticClass:"col l4 offset-l2 s12"},[e("ul",[e("li",[e("a",{staticClass:"grey-text text-lighten-3",attrs:{href:"https://t.me/ajoah_bot",target:"_blank",cursor:"hand"}},[this._v("텔레그램봇 바로가기")])])])])])]),this._v(" "),e("div",{staticClass:"footer-copyright"},[e("div",{staticClass:"container"},[this._v("\n           Copyright 2019. 송-윤-정. All Right Reserved.\n            ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-content"},[e("h6",[this._v("화장실 예약하시겠습니까?")])])}]};var b=s("VU/8")(C,j,!1,function(t){s("vHJA")},null,null).exports,x={data:function(){return{phNo:"",password:""}},created:function(){this.$store.commit("select_view_false")},methods:{login:function(){this.$router.push({path:"/login"}),window.location.reload()},signup:function(){this.$router.push({path:"/signup"}),window.location.reload()}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"signup container"},[s("form",{staticClass:"card-panel",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[t._m(0),t._v(" "),s("div",{staticStyle:{height:"50px"}}),t._v(" "),t._m(1),t._v(" "),s("div",{staticStyle:{height:"100px"}}),t._v(" "),s("div",{staticClass:"field center"},[s("button",{staticClass:"btn deep-purple",on:{click:function(e){return t.signup()}}},[t._v("회원가입")]),t._v(" "),s("button",{staticClass:"btn deep-purple",on:{click:function(e){return t.login()}}},[t._v("로그인")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"center deep-purple-text"},[this._v("Ajoah 서비스에 오신 것을"),e("br"),this._v("환영합니다.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{staticClass:"deep-purple-text"},[e("h6",[this._v("Ajoah 서비스를 사용하시려면 회원가입이 필요합니다.")])])]),this._v(" "),e("li",[e("a",{staticClass:"deep-purple-text"},[e("h6",[this._v("회원가입이 되어 있으시면 로그인하여 사용해 주세요.")])])])])}]},y=s("VU/8")(x,k,!1,null,null,null).exports,E=s("bOdI"),N=s.n(E),z=(s("wffv"),N()({name:"Signup",data:function(){return{email:null,password:null,alias:null,feedback:null,slug:null,phNo:"",appVerifier:"",otp:"",answer:"",nickname:"",vefication_code:!1}},created:function(){this.$store.commit("select_view_false")},methods:{signup:function(){var t=this,e=this,s="+82"+this.phNo.substring(1),a=o.collection("users").doc(s);a.get().then(function(s){s.exists?alert(t.phNo+" 핸드폰번호로 이미 가입 되었습니다."):a.set({nickname:t.nickname,reg_datetime:Date.now(),sms_phone_number:t.phNo,sms_auth_number:t.otp,sms_auth_yn:"Y",noti_req_channel:"MobileWeb",sms_auth_datetime:Date.now()}).then(function(){console.log("Document successfully written!"),M.toast({html:"회원 가입 되었습니다. 패스워드를 설정해 주세요.",classes:"rounded"}),e.$router.push({path:"/setPassword"})}).catch(function(t){console.error("Error writing document: ",t)})})},sendOtp:function(){if(0==this.phNo.length)alert("핸드폰번호를 입력해 주세요!");else if(this.phNo.length<10)alert("올바른 핸드폰번호인지 확인해 주세요. ["+this.phNo.length+"]");else{var t="+82"+this.phNo,e=this.appVerifier;n.auth().signInWithPhoneNumber(t,e).then(function(t){window.confirmationResult=t,this.vefication_code=!0}).catch(function(t){})}},verifyOtp:function(){if(this.vefication_code)alert("인증코드 받기를 먼저 진행해 주세요.");else if(this.phNo.length<10)alert("핸드폰번호를 올바르게 입력해 주세요.");else if(6!=this.otp.length)alert("인증코드 6자리를 입력해 주세요.");else if("준경종"!=this.answer)alert("가입질문 힌트를 확인하시어 3자리 가입질문 답을 입력해 주세요.\n(힌트 : 송*수, 윤*민, 정*현)");else{var t=this.otp;this.signup(),window.confirmationResult.confirm(t).then(function(t){t.user;this.signup(),console.log("Success")}).catch(function(t){console.log("Fail")})}},initReCaptcha:function(){var t=this;setTimeout(function(){window.recaptchaVerifier=new n.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(t){},"expired-callback":function(){}}),t.appVerifier=window.recaptchaVerifier},1e3)}}},"created",function(){this.initReCaptcha()})),S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{attrs:{id:"recaptcha-container"}}),t._v(" "),s("form",{staticClass:"card-panel",on:{submit:function(e){return e.preventDefault(),t.verifyOtp(e)}}},[s("h3",{staticClass:"center deep-purple-text"},[t._v("Ajoah 회원가입")]),t._v(" "),s("div",{staticStyle:{height:"30px"}}),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"field col s12"},[s("label",{attrs:{for:"icon_prefix"}},[t._v("이름(별명)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"validate",attrs:{id:"icon_prefix",type:"text","data-length":"20"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}}),t._v(" "),s("span",{staticClass:"helper-text",attrs:{"data-error":"wrong","data-success":"right"}})])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"field col s12"},[s("label",{attrs:{for:"icon_prefix"}},[t._v("핸드폰번호")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phNo,expression:"phNo"}],staticClass:"validate",attrs:{id:"icon_prefix",type:"number","data-length":"12"},domProps:{value:t.phNo},on:{input:function(e){e.target.composing||(t.phNo=e.target.value)}}}),t._v(" "),s("span",{staticClass:"helper-text",attrs:{"data-error":"wrong","data-success":"right"}})]),t._v(" "),s("div",{staticClass:"field right"},[s("a",{staticClass:"waves-effect waves-teal btn-flat",on:{click:t.sendOtp}},[t._v("인증코드받기")])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"field col s12"},[s("label",{attrs:{for:"otp"}},[t._v("인증코드")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.otp,expression:"otp"}],attrs:{id:"otp",type:"number",value:""},domProps:{value:t.otp},on:{input:function(e){e.target.composing||(t.otp=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"field col s12"},[t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"answer"}],attrs:{id:"answer",type:"text",value:""},domProps:{value:t.answer},on:{input:function(e){e.target.composing||(t.answer=e.target.value)}}})])]),t._v(" "),t._m(1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"answer"}},[this._v("가입질문 : AJOAH 만든이 3명의 중간글자를 입력하세요."),e("br"),this._v("(힌트 : 송*수, 윤*민, 정*현)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field center"},[e("button",{staticClass:"btn deep-purple"},[this._v("회원가입 하기")])])}]};var A=s("VU/8")(z,S,!1,function(t){s("i3yH")},null,null).exports,P={data:function(){return{password:"",password_2:""}},created:function(){var t=this;this.$store.commit("select_view_false");n.auth().currentUser;n.auth().onAuthStateChanged(function(e){e?t.user=e:(t.user=null,t.$router.push({path:"/login"}),window.location.reload())})},methods:{setPassword:function(){if(this.password!=this.password_2)alert("입력하신 비밀번호와 확인 비밀번호가 일치 하지 않습니다.");else if(this.password.length<6)alert("패스워드가 너무 짧습니다. 패스워드는 적어도 6자리 이상 입력해 주세요.");else{var t=this,e=n.auth().currentUser,s=n.auth().currentUser.phoneNumber+"@ajoah2019.com";console.log("newEmail"+s);var a=this.password;e.updateEmail(s).then(function(){e.updatePassword(a).then(function(){alert("패스워드 설정이 성공했습니다. 앞으로는 핸드폰번호와 설정하신 비밀번호로 로그인이 가능합니다."),t.$router.push("/")}).catch(function(t){alert("Error :"+t.message)})}).catch(function(e){"auth/requires-recent-login"==e.code&&(alert("세션이 만료 되었습니다. 재 접속해 주세요."),t.signout())})}},signout:function(){n.auth().signOut(),this.$router.push({path:"/"}),window.location.reload()}}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"signup container"},[s("form",{staticClass:"card-panel",on:{submit:function(e){return e.preventDefault(),t.setPassword(e)}}},[s("h3",{staticClass:"center deep-purple-text"},[t._v("패스워드 설정")]),t._v(" "),s("div",{staticStyle:{height:"30px"}}),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"field col s12"},[s("label",{attrs:{for:"password"}},[t._v("패스워드를 입력하세요")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"field col s12"},[s("label",{attrs:{for:"password_2"}},[t._v("패스워드를 다시한번 입력하세요")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password_2,expression:"password_2"}],attrs:{id:"password_2",type:"password"},domProps:{value:t.password_2},on:{input:function(e){e.target.composing||(t.password_2=e.target.value)}}})])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field center"},[e("button",{staticClass:"btn deep-purple"},[this._v("패스워드 설정하기")])])}]},O=s("VU/8")(P,R,!1,null,null,null).exports,$={data:function(){return{phNo:"",password:""}},created:function(){},mounted:function(){},methods:{login:function(){var t=this,e="+82"+this.phNo.substring(1)+"@ajoah2019.com",s=this.password;n.auth().signInWithEmailAndPassword(e,s).then(function(){t.$store.commit("select_view_true"),t.$router.push({name:"Index"}),window.location.reload()}).catch(function(t){t.code,t.message;for(var e=t.message.toLowerCase();-1!=e.indexOf("email");)e=e.replace("email address","phone number");alert("Error: "+e)})}}},I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"signup container"},[s("form",{staticClass:"card-panel",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("h3",{staticClass:"center deep-purple-text"},[t._v("Ajoah 로그인")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"field col s12"},[s("label",{attrs:{for:"phNo"}},[t._v("핸드폰번호를 입력해 주세요.")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phNo,expression:"phNo"}],attrs:{id:"phNo",type:"number"},domProps:{value:t.phNo},on:{input:function(e){e.target.composing||(t.phNo=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"field col s12"},[s("label",{attrs:{for:"password"}},[t._v("패스워드를 입력해 주세요.")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field center"},[e("button",{staticClass:"btn deep-purple"},[this._v("로그인 하기")])])}]},D=s("VU/8")($,I,!1,null,null,null).exports,U={name:"ViewProfile",data:function(){return{profile:null,newComment:null,feedback:null,comments:[]}},created:function(){var t=this,e=o.collection("users");e.where("user_id","==",firebase.auth().currentUser.uid).get().then(function(e){e.forEach(function(e){t.user=e.data(),t.user.id=e.id})}),e.doc(this.$route.params.id).get().then(function(e){t.profile=e.data()}),o.collection("comments").where("to","==",this.$route.params.id).orderBy("time").onSnapshot(function(e){e.docChanges.forEach(function(e){"added"==e.type&&t.comments.unshift({from:e.doc.data().from,content:e.doc.data().content})})})},methods:{addComment:function(){var t=this;this.newComment?(this.feedback=null,o.collection("comments").add({to:this.$route.params.id,from:this.user.id,content:this.newComment,time:Date.now()}).then(function(e){t.newComment=null})):this.feedback="You must enter a comment to add it"}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"view-profile container"},[t.profile?s("div",{staticClass:"card"},[s("h2",{staticClass:"deep-purple-text center"},[t._v(t._s(t.profile.alias)+"'s Wall")]),t._v(" "),s("ul",{staticClass:"comments collection"},t._l(t.comments,function(e,a){return s("li",{key:a},[s("div",{staticClass:"deep-purple-text"},[t._v(t._s(e.from))]),t._v(" "),s("div",{staticClass:"grey-text text-darken-2"},[t._v(t._s(e.content))])])}),0),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.addComment(e)}}},[s("div",{staticClass:"field"},[s("label",{attrs:{for:"comment"}},[t._v("Add a comment")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newComment,expression:"newComment"}],attrs:{type:"text",name:"comment"},domProps:{value:t.newComment},on:{input:function(e){e.target.composing||(t.newComment=e.target.value)}}}),t._v(" "),t.feedback?s("p",{staticClass:"red-text center"},[t._v(t._s(t.feedback))]):t._e()])])]):t._e()])},staticRenderFns:[]};var V=s("VU/8")(U,F,!1,function(t){s("0goD")},null,null).exports;a.a.use(p.a);var q=new p.a({routes:[{path:"/",name:"serviceIntro",component:y},{path:"/login",name:"Login",component:D},{path:"/signup",name:"Signup",component:A},{path:"/index",name:"Index",component:b},{path:"/setPassword",name:"SetPassword",component:O},{path:"/profile/:id",name:"ViewProfile",component:V}]});s.d(e,"store",function(){return L}),a.a.config.productionTip=!1,a.a.use(i.a);var L=new i.a.Store({state:{select_view:!1},mutations:{select_view_true:function(t){t.select_view=!0},select_view_false:function(t){t.select_view=!1}}});new a.a({el:"#app",router:q,store:L,components:{App:_},template:'<App :user="user" ></App>',data:function(){return{user:{}}},methods:{getLoginStatus:function(){var t=this;l.a.auth().onAuthStateChanged(function(e){t.user=e||null})}},updated:function(){this.getLoginStatus()},created:function(){this.getLoginStatus()}})},i3yH:function(t,e){},"nDk+":function(t,e,s){t.exports=s.p+"static/img/toilet_ing_6_low.abe5cb8.jpg"},uslO:function(t,e,s){var a={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-SG":"oYA3","./en-SG.js":"oYA3","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(t){return s(n(t))}function n(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(a)},i.resolve=n,t.exports=i,i.id="uslO"},vHJA:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e664bbd3c254c271372f.js.map